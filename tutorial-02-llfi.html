<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta name="generator" content="jemdoc, see http://jemdoc.jaboc.net/" />
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link rel="stylesheet" href="jemdoc.css" type="text/css" />
<title>LLFI: LLVM-based Fault Injection Tool</title>
</head>
<body>
<table summary="Table for page layout." id="tlayout">
<tr valign="top">
<td id="layout-menu">
<div class="menu-category">Yafan Huang</div>
<div class="menu-item"><a href="index.html">Home</a></div>
<div class="menu-item"><a href="news.html">News</a></div>
<div class="menu-category">Research &amp; Experiences</div>
<div class="menu-item"><a href="publications.html">Publications</a></div>
<div class="menu-item"><a href="research-uiowa.html">Research@UIowa</a></div>
<div class="menu-item"><a href="research-hust.html">Research@HUST</a></div>
<div class="menu-item"><a href="experiences.html">Experiences</a></div>
<div class="menu-category">Links</div>
<div class="menu-item"><a href="tech-blogs.html">Tech&nbsp;Blogs</a></div>
<div class="menu-item"><a href="https://github.com/hyfshishen">Github</a></div>
<div class="menu-item"><a href="https://scholar.google.com/citations?user=r8qwkW8AAAAJ&hl=en&oi=sra">Google&nbsp;Scholar</a></div>
<div class="menu-item"><a href="https://www.semanticscholar.org/author/2108587365">Semantic&nbsp;Scholar</a></div>
<div class="menu-item"><a href="https://cn.linkedin.com/in/yafan-huang-2471181a0">LinkedIn</a></div>
<div class="menu-item"><a href="image/wechat.jpeg">WeChat</a></div>
<div class="menu-item"><a href="">Miscellaneous</a></div>
</td>
<td id="layout-content">
<div id="toptitle">
<h1>LLFI: LLVM-based Fault Injection Tool</h1>
</div>
<h2>About</h2>
<p>This tutorial targets to provide a consise instruction on using LLFI to perform fault injection experiments.
Also, it is used in UIowa:CS:4980:0002, Topics in Computer Science II: Dependable System Design instructed by Dr. <a href="https://homepage.divms.uiowa.edu/~guanpli/index.html">Guanpeng Li</a>).
The main contents of this tutorial are shown as below:</p>
<ul>
<li><p>How to install LLFI?</p>
</li>
<li><p>What is LLFI? Why we use it?</p>
</li>
<li><p>How to use LLFI?</p>
</li>
</ul>
<h2>LLFI Quick Installation</h2>
<p>Before you install LLFI, make sure your environment has <tt>python3</tt> and its package <tt>pyyaml</tt>. For <tt>pyyaml</tt>, version 4x is okay and 4.2b1 is highly recommended.
Other dependencies can be found at [<a href="https://github.com/DependableSystemsLab/LLFI">1</a>].</p>
<div class="codeblock">
<div class="blocktitle">Following commands show how to install LLFI on a Ubuntu 16.04 machine.</div>
<div class="blockcontent"><pre>
$ git clone https://github.com/DependableSystemsLab/LLFI.git                           <span class = "comment"># download LLFI repository</span>
$ cd LLFI/installer                                                                    <span class = "comment"># change directory to quick installation folder</span>
$ python3 InstallLLFI.py --noGUI                                                       <span class = "comment"># quickly install command-line-version LLFI with python driver</span>
</pre></div></div>
<p><tt>python3 InstallLLFI.py --noGUI</tt> contains building LLVM, so it might be slow.
If you want to speed up this process, please replace <b>InstallLLFI.py:line 328</b> with <tt>p = subprocess.call(["make", "-j16"])</tt>. 
&ldquo;16&rdquo; indicates the maximum thread number per user in your OS. You can use command <tt>nproc</tt> to check it out.</p>
<div class="codeblock">
<div class="blocktitle">Setting up local environment for LLFI</div>
<div class="blockcontent"><pre>
$ echo "export PATH=YOUR-LOCAL-PATH/LLFI/installer/llfi/bin:\$PATH" &gt;&gt; ~/.bashrc       <span class = "comment"># adding LLFI executable binary path variables to local environment</span>
$ source ~/.bashrc                                                                     <span class = "comment"># activate environment</span>
</pre></div></div>
<div class="codeblock">
<div class="blocktitle">Checking if installation is successful.</div>
<div class="blockcontent"><pre>
$ cd $YOUR-LOCAL-PATH$/LLFI/installer/llfi/bin &amp;&amp; ls                                   <span class = "comment"># list all compiled LLFI executable binaries</span>
batchInjectfault  batchProfile  cmake_install.cmake      injectfault       instrument  Makefile  SoftwareFailureAutoScan
batchInstrument   CMakeFiles    HardwareFailureAutoScan  InjectorAutoScan  llfi-gui    profile
$ <span class = "comment"># It indicates LLFI is successfully installed to your machine :)</span>
</pre></div></div>
<h2>LLFI</h2>
<p>LLFI (Low-Level Fault Injector) is an LLVM based fault injection tool, which injects faults into the LLVM IR (human-readable one) of a specified program.
LLFI is mainly implemented by several LLVM 3.4 passes and driven by python script.
The fault injection (FI) campaign of LLFI is defined by <tt>input.yaml</tt> and very flexible.</p>
<p>We have already known FI is commonly used for testing program resiliency against soft errors. But why we use LLFI? (or why we injection faults on LLVM IR) There are several reasons:</p>
<ul>
<li><p>Hardware FI is hard to pinpoint a certain location (imagine you want to flip a certain bit in a hardware device >_<). The analysis is also very hard in hardware. Beam test is even radio active.</p>
</li>
<li><p>Architecture FI can be conducted by simulator, but it is very slow. Some architecture designs (such as Intel) are not publicly available, making it hard to develop simulator.</p>
</li>
<li><p>Thus, application-level FI is flexible and easy to develop and post-analyze. Besides, Wei et al [<a href="http://blogs.ubc.ca/karthik/files/2014/04/DSN-Jiesheng.pdf">2</a>] have demonstrated FIs on binary (PINFI) and LLVM (LLFI) can produce similar results.</p>
</li>
<li><p>In LLVM-level FIs, because of its Optimizer and standard IR, we can easily perform a lot of code transformations and program analysis by developing LLVM Passes. Here tracking error propagation is also possible.</p>
</li>
</ul>
<p>To use LLFI, there are three major steps. We use pathfinder from Rodinia benchmark suite [<a href="http://www.cs.virginia.edu/rodinia/doku.php">3</a>] for example.</p>
<div class="codeblock">
<div class="blocktitle">1. Instrumentation: instrumenting functional code in given program IR</div>
<div class="blockcontent"><pre>
$ <span class = "comment"># command example</span>
$ <span class = "comment"># note that you should have LLFI configure file called input.yaml in the same path before you run this command.</span>
$ <span class = "comment"># details can be found in LLFI Usage section.</span>
$ instrument --readable pathfinder.ll
</pre></div></div>
<div class="codeblock">
<div class="blocktitle">2. Profile: a fault-free program execution</div>
<div class="blockcontent"><pre>
$ <span class = "comment"># command example</span>
$ <span class = "comment"># note that this command should be executed after "instrument"</span>
$ profile ./llfi/pathfinder-profiling.exe 1000 10                                      <span class = "comment"># "1000 10" is the program input of pathfinder</span>
</pre></div></div>
<div class="codeblock">
<div class="blocktitle">3. Fault Injection: program executions with faults</div>
<div class="blockcontent"><pre>
$ <span class = "comment"># command example</span>
$ <span class = "comment"># note that this command should be executed after "profile"</span>
$ injectfault ./llfi/pathfinder-faultinjection.exe 1000 10                             <span class = "comment"># "1000 10" is the program input of pathfinder</span>
</pre></div></div>
<h2>LLFI Usage</h2>
<h3>Preprocess and Compile</h3>
<h3>Per-Instruction FI</h3>
<h3>Random FI</h3>
<h3>Post-analysis</h3>
<h2>References</h2>
<div id="footer">
<div id="footer-text">
Page generated 2022-02-28 02:28:32 CST, by <a href="http://jemdoc.jaboc.net/">jemdoc</a>.
</div>
</div>
</td>
</tr>
</table>
</body>
</html>
